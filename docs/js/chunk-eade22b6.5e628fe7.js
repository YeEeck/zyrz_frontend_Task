(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eade22b6"],{5703:function(t,e,a){"use strict";a("e756")},ba28:function(t,e,a){"use strict";a("c922")},c2be:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exam_outer"},[a("a-drawer",{staticClass:"user_drawer",attrs:{title:"创建新考试",width:360,visible:t.visible,"body-style":{paddingBottom:"80px"}},on:{close:t.onClose}},[a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试名称"},model:{value:t.newTitle,callback:function(e){t.newTitle=e},expression:"newTitle"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试类型"},model:{value:t.newTip,callback:function(e){t.newTip=e},expression:"newTip"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试地点"},model:{value:t.newArea,callback:function(e){t.newArea=e},expression:"newArea"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试时间"},model:{value:t.newTime,callback:function(e){t.newTime=e},expression:"newTime"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"监考老师"},model:{value:t.newTeacher,callback:function(e){t.newTeacher=e},expression:"newTeacher"}}),a("a-button",{attrs:{type:"primary"},on:{click:t.addData}},[t._v("新建")])],1),a("a-drawer",{staticClass:"user_drawer",attrs:{title:"编辑考试",width:360,visible:t.visibleE,"body-style":{paddingBottom:"80px"}},on:{close:t.onCloseE}},[a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试名称"},model:{value:t.eTitle,callback:function(e){t.eTitle=e},expression:"eTitle"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试类型"},model:{value:t.eTip,callback:function(e){t.eTip=e},expression:"eTip"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试地点"},model:{value:t.eArea,callback:function(e){t.eArea=e},expression:"eArea"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试时间"},model:{value:t.eTime,callback:function(e){t.eTime=e},expression:"eTime"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"监考老师"},model:{value:t.eTeacher,callback:function(e){t.eTeacher=e},expression:"eTeacher"}}),a("a-button",{attrs:{type:"primary"},on:{click:t.editData}},[t._v("提交")])],1),a("a-drawer",{staticClass:"user_drawer",attrs:{title:"记录新成绩",width:360,visible:t.visible2,"body-style":{paddingBottom:"80px"}},on:{close:t.onClose2}},[a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"学生姓名"},model:{value:t.name2,callback:function(e){t.name2=e},expression:"name2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"专业"},model:{value:t.type2,callback:function(e){t.type2=e},expression:"type2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"班级"},model:{value:t.Sclass2,callback:function(e){t.Sclass2=e},expression:"Sclass2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"身份证号"},model:{value:t.idNo2,callback:function(e){t.idNo2=e},expression:"idNo2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试名"},model:{value:t.exam2,callback:function(e){t.exam2=e},expression:"exam2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试成绩"},model:{value:t.score2,callback:function(e){t.score2=e},expression:"score2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"登分时间"},model:{value:t.time2,callback:function(e){t.time2=e},expression:"time2"}}),a("a-button",{attrs:{type:"primary"},on:{click:t.addData2}},[t._v("新建")])],1),a("a-drawer",{staticClass:"user_drawer",attrs:{title:"记录新成绩",width:360,visible:t.visible3,"body-style":{paddingBottom:"80px"}},on:{close:t.onClose3}},[a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"学生姓名"},model:{value:t.name2,callback:function(e){t.name2=e},expression:"name2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"专业"},model:{value:t.type2,callback:function(e){t.type2=e},expression:"type2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"班级"},model:{value:t.Sclass2,callback:function(e){t.Sclass2=e},expression:"Sclass2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"身份证号"},model:{value:t.idNo2,callback:function(e){t.idNo2=e},expression:"idNo2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试名"},model:{value:t.exam2,callback:function(e){t.exam2=e},expression:"exam2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"考试成绩"},model:{value:t.score2,callback:function(e){t.score2=e},expression:"score2"}}),a("a-input",{staticStyle:{"margin-bottom":"1rem"},attrs:{placeholder:"登分时间"},model:{value:t.time2,callback:function(e){t.time2=e},expression:"time2"}}),a("a-button",{attrs:{type:"primary"},on:{click:t.addData3}},[t._v("新建")])],1),a("div",{staticClass:"exam_top_bar"},[a("h1",{staticStyle:{display:"inline"}},[t._v("考务管理")]),a("div",{staticClass:"exam_topbar_button_out"},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:t.showExport,expression:"showExport"}],staticClass:"add_button",attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出")]),a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#exam_table_out",expression:"'#exam_table_out'"},{name:"show",rawName:"v-show",value:t.showPrint1,expression:"showPrint1"}],staticClass:"add_button",attrs:{type:"primary"}},[t._v("打印")]),a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#exam_table1",expression:"'#exam_table1'"},{name:"show",rawName:"v-show",value:t.showPrint2,expression:"showPrint2"}],staticClass:"add_button",attrs:{type:"primary"}},[t._v("打印")]),a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#exam_table2",expression:"'#exam_table2'"},{name:"show",rawName:"v-show",value:t.showPrint3,expression:"showPrint3"}],staticClass:"add_button",attrs:{type:"primary"}},[t._v("打印")]),a("a-button",{staticClass:"add_button",attrs:{type:"primary"},on:{click:t.showDrawer}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" "+t._s(t.addText)+" ")],1)],1)]),a("a-tabs",{staticClass:"exam_tab",attrs:{"default-active-key":"1",size:"large","active-key":t.tab_key},on:{change:t.tabChange}},[a("a-tab-pane",{key:"1",attrs:{tab:"考试管理"}},[a("div",{staticClass:"exam_table_out",attrs:{id:"exam_table_out"}},[a("div",{staticClass:"items_list"},[a("a-skeleton",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{active:"",paragraph:{rows:5}}}),t._l(t.list,(function(e,i){return a("exam-item",{directives:[{name:"show",rawName:"v-show",value:t.fLoading,expression:"fLoading"}],key:i,attrs:{title:e.title,tip:e.tip,area:e.area,time:e.time,teacher:e.teacher,id:e._id},on:{refreshData:t.edit,upData:t.updateData}})}))],2)])]),a("a-tab-pane",{key:"2",attrs:{tab:"成绩管理","force-render":""}},[a("div",{staticClass:"exam_table_out2"},[a("a-table",{staticClass:"table1",attrs:{columns:t.columns_status,"data-source":t.data_score,pagination:t.pagination,loading:t.loading2,bordered:"",id:"exam_table1"},scopedSlots:t._u([{key:"tags",fn:function(e){return a("p",{staticClass:"do_p"},[a("a-button",{on:{click:function(a){return t.del2(e)}}},[t._v("删除")])],1)}}])})],1)]),a("a-tab-pane",{key:"3",attrs:{tab:"补考/重修管理","force-render":""}},[a("div",{staticClass:"exam_table_out2"},[a("a-table",{staticClass:"table1",attrs:{columns:t.columns_status2,"data-source":t.data_score2,pagination:t.pagination,loading:t.loading3,bordered:"",id:"exam_table2"},scopedSlots:t._u([{key:"tags",fn:function(e){return a("p",{staticClass:"do_p"},[a("a-button",{on:{click:function(a){return t.del3(e)}}},[t._v("删除")])],1)}}])})],1)])],1)],1)},s=[],n=a("21a6"),o=a.n(n),r=a("1146"),l=a.n(r),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exam_item_container"},[a("span",{staticClass:"item_title"},[t._v(t._s(t.title))]),a("a-tag",{staticClass:"exam_tip",attrs:{color:"blue"}},[t._v(t._s(t.tip))]),a("span",{staticClass:"exam_sub"},[t._v("考试地点:"),a("span",[t._v(t._s(t.area))])]),a("span",{staticClass:"exam_sub"},[t._v("考试时间:"),a("span",[t._v(t._s(t.time))])]),a("span",{staticClass:"exam_sub"},[t._v("监考老师:"),a("span",[t._v(t._s(t.teacher))])]),a("div",{staticClass:"exam_bottom_bar"},[a("a-button",{staticClass:"bottom_bar_button",attrs:{type:"primary"},on:{click:t.edit}},[t._v("编辑")]),a("a-button",{attrs:{type:"primary"},on:{click:t.del}},[t._v("删除")])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text"},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})],1)},m=[],d=(a("b0c0"),a("1bab"));function u(){return Object(d["a"])({url:"/http/getExam",method:"GET"})}function p(t){var e=t.newTitle,a=t.newTip,i=t.newArea,s=t.newTime,n=t.newTeacher;return Object(d["a"])({url:"/http/addExam",method:"POST",data:{title:e,tip:a,area:i,time:s,teacher:n}})}function h(t){var e=t.id;return Object(d["a"])({url:"/http/delExam",method:"POST",data:{id:e}})}function b(t){var e=t.title,a=t.tip,i=t.area,s=t.time,n=t.teacher,o=t._id;return Object(d["a"])({url:"/http/editExam",method:"POST",data:{title:e,tip:a,area:i,time:s,teacher:n,_id:o}})}function v(){return Object(d["a"])({url:"/http/score",method:"POST",data:{mtype:"1"}})}function g(t){var e=t.name,a=t.type,i=t.Sclass,s=t.idNo,n=t.exam,o=t.score,r=t.time;return Object(d["a"])({url:"/http/score",method:"POST",data:{mtype:"2",name:e,type:a,Sclass:i,idNo:s,exam:n,score:o,time:r}})}function x(t){var e=t.id;return Object(d["a"])({url:"/http/score",method:"POST",data:{mtype:"3",id:e}})}function f(){return Object(d["a"])({url:"/http/pascore",method:"POST",data:{mtype:"1"}})}function _(t){var e=t.name,a=t.type,i=t.Sclass,s=t.idNo,n=t.exam,o=t.score,r=t.time;return Object(d["a"])({url:"/http/pascore",method:"POST",data:{mtype:"2",name:e,type:a,Sclass:i,idNo:s,exam:n,score:o,time:r}})}function w(t){var e=t.id;return Object(d["a"])({url:"/http/pascore",method:"POST",data:{mtype:"3",id:e}})}var y={name:"exam-item",props:{title:String,tip:String,area:String,time:String,teacher:String,id:String},data:function(){return{etitle:this.title,etip:this.tip,earea:this.area,etime:this.time,eteacher:this.teacher,Gid:this.id}},methods:{del:function(){var t=this;this.$confirm({title:"确定要删除该考试吗？",content:"该操作将不可恢复，请谨慎操作",onOk:function(){var e=t.$message.loading("正在删除...",0);h({id:t.Gid}).then((function(a){setTimeout(e,0),1==a.data.deleted?t.$message.success("删除成功"):t.$message.error("删除失败"),t.$emit("upData")})).catch((function(a){setTimeout(e,0),t.$message.error(a),t.$message.error("连接异常"),t.$parent.updateData()}))},onCancel:function(){}})},edit:function(){this.$emit("refreshData",{title:this.etitle,tip:this.etip,area:this.earea,time:this.etime,teacher:this.eteacher,id:this.Gid})}}},T=y,S=(a("5703"),a("2877")),k=Object(S["a"])(T,c,m,!1,null,null,null),$=k.exports,C=[{title:"学生姓名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"专业",dataIndex:"type"},{title:"班级",dataIndex:"Sclass"},{title:"身份证号",dataIndex:"idNo"},{title:"考试",dataIndex:"exam"},{title:"成绩",dataIndex:"score"},{title:"记录时间",dataIndex:"time"},{title:"操作",scopedSlots:{customRender:"tags"},width:90}],N=[{title:"学生姓名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"专业",dataIndex:"type"},{title:"班级",dataIndex:"Sclass"},{title:"身份证号",dataIndex:"idNo"},{title:"考试",dataIndex:"exam"},{title:"补考成绩",dataIndex:"score"},{title:"记录时间",dataIndex:"time"},{title:"操作",scopedSlots:{customRender:"tags"},width:90}],D={components:{examItem:$},data:function(){return{pagination:{pageSize:10},addText:"New Exam",columns_status:C,columns_status2:N,loading:!0,list:[],data_score:[],data_score2:[],visible:!1,visibleE:!1,tab_key:"1",flush:!0,newTitle:"",newTip:"",newArea:"",newTime:"",newTeacher:"",eTitle:"",eTip:"",eArea:"",eTime:"",eTeacher:"",e_id:"",loading2:!0,visible2:!1,name2:"",type2:"",Sclass2:"",idNo2:"",exam2:"",score2:"",time2:"",loading3:!0,visible3:!1,table_name:"#exam_table1",showExport:!1}},activated:function(){this.updateData(),this.updateData2(),this.updateData3()},computed:{fLoading:function(){return!this.loading},showPrint1:function(){return"1"==this.tab_key},showPrint2:function(){return"2"==this.tab_key},showPrint3:function(){return"3"==this.tab_key}},watch:{tab_key:function(t){this.addText=1==t?"New Exam":2==t?"New Score":"New Record"}},methods:{exportExcel:function(){var t=l.a.utils.table_to_book(document.querySelector(this.table_name)),e=l.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{o.a.saveAs(new Blob([e],{type:"application/octet-stream"}),this.table_name+".xlsx")}catch(a){"undefined"!==typeof console&&console.log(a,e)}return e},tabChange:function(t){this.tab_key=t,2==t?(this.table_name="#exam_table1",this.showExport=!0):3==t?(this.table_name="#exam_table2",this.showExport=!0):this.showExport=!1},updateData:function(){var t=this;this.loading=!0,u().then((function(e){t.list=e.data,t.loading=!1})).catch((function(e){console.log(e),t.$message.error("网络连接异常")}))},edit:function(t){this.eTitle=t.title,this.eTip=t.tip,this.eArea=t.area,this.eTime=t.time,this.eTeacher=t.teacher,this.e_id=t.id,this.showDrawerE()},editData:function(){var t=this,e=this.$message.loading("正在提交修改...",0);b({title:this.eTitle,tip:this.eTip,area:this.eArea,time:this.eTime,teacher:this.eTeacher,_id:this.e_id}).then((function(a){console.log(a),0!=a.data.success?(setTimeout(e,0),t.$message.success("修改成功"),t.$router.go(0)):(setTimeout(e,0),t.$message.error("修改失败"))})).catch((function(a){setTimeout(e,0),t.$message.error(a),t.$message.error("网络连接异常")})),this.visibleE=!1},showDrawer:function(){1==this.tab_key?this.visible=!0:2==this.tab_key?this.visible2=!0:this.visible3=!0},onClose:function(){this.visible=!1},showDrawerE:function(){this.visibleE=!0},onCloseE:function(){this.visibleE=!1},onClose2:function(){this.visible2=!1},onClose3:function(){this.visible3=!1},addData:function(){var t=this,e=this.$message.loading("正在添加...",0);p({newTitle:this.newTitle,newTip:this.newTip,newArea:this.newArea,newTime:this.newTime,newTeacher:this.newTeacher}).then((function(a){0!=a.data.success?(setTimeout(e,0),t.$message.success("添加成功"),t.updateData()):(setTimeout(e,0),t.$message.error("添加失败"))})).catch((function(a){setTimeout(e,0),t.$message.error(a),console.log(a),t.$message.error("添加失败，网络连接异常")})),this.visible=!1,this.clear()},clear:function(){this.newTitle="",this.newTip="",this.newArea="",this.newTime="",this.newTeacher=""},updateData2:function(){var t=this;this.loading2=!0,v().then((function(e){t.data_score=e.data,t.loading2=!1})).catch((function(e){console.log(e),t.$message.error("网络连接异常")}))},addData2:function(){var t=this,e=this.$message.loading("正在添加...",0);g({name:this.name2,type:this.type2,Sclass:this.Sclass2,idNo:this.idNo2,exam:this.exam2,score:this.score2,time:this.time2}).then((function(a){0!=a.data.success?(setTimeout(e,0),t.$message.success("添加成功"),t.updateData2()):(setTimeout(e,0),t.$message.error("添加失败"))})).catch((function(a){setTimeout(e,0),t.$message.error(a),console.log(a),t.$message.error("添加失败，网络连接异常")})),this.visible2=!1,this.clear2()},clear2:function(){this.name2="",this.type2="",this.Sclass2="",this.idNo2="",this.exam2="",this.score2="",this.time2=""},del2:function(t){var e=this;this.$confirm({title:"确定要删除这个学生吗？",content:"该操作将不可恢复，请谨慎操作",onOk:function(){var a=e.$message.loading("正在删除...",0);x({id:t._id}).then((function(t){setTimeout(a,0),1==t.data.deleted?e.$message.success("删除成功"):e.$message.error("删除失败"),e.updateData2()})).catch((function(t){setTimeout(a,0),e.$message.error(t),e.$message.error("连接异常"),e.updateData2()}))},onCancel:function(){}})},updateData3:function(){var t=this;this.loading3=!0,f().then((function(e){t.data_score2=e.data,t.loading3=!1})).catch((function(e){console.log(e),t.$message.error("网络连接异常")}))},addData3:function(){var t=this,e=this.$message.loading("正在添加...",0);_({name:this.name2,type:this.type2,Sclass:this.Sclass2,idNo:this.idNo2,exam:this.exam2,score:this.score2,time:this.time2}).then((function(a){0!=a.data.success?(setTimeout(e,0),t.$message.success("添加成功"),t.updateData3()):(setTimeout(e,0),t.$message.error("添加失败"))})).catch((function(a){setTimeout(e,0),t.$message.error(a),console.log(a),t.$message.error("添加失败，网络连接异常")})),this.visible3=!1,this.clear2()},del3:function(t){var e=this;this.$confirm({title:"确定要删除这个学生吗？",content:"该操作将不可恢复，请谨慎操作",onOk:function(){var a=e.$message.loading("正在删除...",0);w({id:t._id}).then((function(t){setTimeout(a,0),1==t.data.deleted?e.$message.success("删除成功"):e.$message.error("删除失败"),e.updateData3()})).catch((function(t){setTimeout(a,0),e.$message.error(t),e.$message.error("连接异常"),e.updateData3()}))},onCancel:function(){}})}}},E=D,O=(a("ba28"),Object(S["a"])(E,i,s,!1,null,null,null));e["default"]=O.exports},c922:function(t,e,a){},e756:function(t,e,a){}}]);
//# sourceMappingURL=chunk-eade22b6.5e628fe7.js.map